<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="795px" preserveAspectRatio="none" style="width:2109px;height:795px;background:#FFFFFF;" version="1.1" viewBox="0 0 2109 795" width="2109px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="602.4219" style="stroke:#181818;stroke-width:1.0;" width="10" x="72.5" y="92.6094"/><rect fill="#FFFFFF" height="351.9609" style="stroke:#181818;stroke-width:1.0;" width="10" x="644.5" y="131.3125"/><rect fill="#FFFFFF" height="190.4063" style="stroke:#181818;stroke-width:1.0;" width="10" x="644.5" y="513.625"/><rect fill="#FFFFFF" height="291.2578" style="stroke:#181818;stroke-width:1.0;" width="10" x="896.5" y="161.6641"/><rect fill="#FFFFFF" height="120.7031" style="stroke:#181818;stroke-width:1.0;" width="10" x="896.5" y="543.9766"/><rect fill="#FFFFFF" height="76.7969" style="stroke:#181818;stroke-width:1.0;" width="10" x="1062.5" y="192.0156"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1376.5" y="299.1641"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1376.5" y="634.6797"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1549.5" y="385.2188"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1549.5" y="574.3281"/><rect height="79.0547" style="stroke:#000000;stroke-width:1.5;fill:none;" width="832" x="805.5" y="344.5156"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="77" x2="77" y1="82.6094" y2="713.0313"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="649.5" x2="649.5" y1="82.6094" y2="713.0313"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="901.5" x2="901.5" y1="82.6094" y2="713.0313"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1067.5" x2="1067.5" y1="82.6094" y2="713.0313"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1214.5" x2="1214.5" y1="82.6094" y2="713.0313"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1381.5" x2="1381.5" y1="82.6094" y2="713.0313"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1554.5" x2="1554.5" y1="82.6094" y2="713.0313"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1761.5" x2="1761.5" y1="82.6094" y2="713.0313"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1999.5" x2="1999.5" y1="82.6094" y2="713.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="5" y="79.5332">Warehouse Employee</text><ellipse cx="77.5" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M77.5,21.5 L77.5,48.5 M64.5,29.5 L90.5,29.5 M77.5,48.5 L64.5,63.5 M77.5,48.5 L90.5,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="5" y="726.5645">Warehouse Employee</text><ellipse cx="77.5" cy="738.1406" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M77.5,746.1406 L77.5,773.1406 M64.5,754.1406 L90.5,754.1406 M77.5,773.1406 L64.5,788.1406 M77.5,773.1406 L90.5,788.1406 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122" x="588.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="595.5" y="71.5332">:DispatchOrderUI</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122" x="588.5" y="712.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="595.5" y="733.5645">:DispatchOrderUI</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="172" x="815.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="158" x="822.5" y="71.5332">:DispatchOrderController</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="172" x="815.5" y="712.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="158" x="822.5" y="733.5645">:DispatchOrderController</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="140" x="997.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126" x="1004.5" y="71.5332">:PersistenceContext</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="140" x="997.5" y="712.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126" x="1004.5" y="733.5645">:PersistenceContext</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="134" x="1147.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="1154.5" y="71.5332">:RepositoryFactory</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="134" x="1147.5" y="712.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="1154.5" y="733.5645">:RepositoryFactory</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="180" x="1291.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="166" x="1298.5" y="71.5332">:Product_OrderRepository</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="180" x="1291.5" y="712.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="166" x="1298.5" y="733.5645">:Product_OrderRepository</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="146" x="1481.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="132" x="1488.5" y="71.5332">order:Product_Order</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="146" x="1481.5" y="712.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="132" x="1488.5" y="733.5645">order:Product_Order</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="248" x="1637.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="234" x="1644.5" y="71.5332">orderdto:Product_OrderDtoComplete</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="248" x="1637.5" y="712.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="234" x="1644.5" y="733.5645">orderdto:Product_OrderDtoComplete</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="208" x="1895.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="194" x="1902.5" y="71.5332">orderslist:List&lt;Product_Order&gt;</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="208" x="1895.5" y="712.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="194" x="1902.5" y="733.5645">orderslist:List&lt;Product_Order&gt;</text><rect fill="#FFFFFF" height="602.4219" style="stroke:#181818;stroke-width:1.0;" width="10" x="72.5" y="92.6094"/><rect fill="#FFFFFF" height="351.9609" style="stroke:#181818;stroke-width:1.0;" width="10" x="644.5" y="131.3125"/><rect fill="#FFFFFF" height="190.4063" style="stroke:#181818;stroke-width:1.0;" width="10" x="644.5" y="513.625"/><rect fill="#FFFFFF" height="291.2578" style="stroke:#181818;stroke-width:1.0;" width="10" x="896.5" y="161.6641"/><rect fill="#FFFFFF" height="120.7031" style="stroke:#181818;stroke-width:1.0;" width="10" x="896.5" y="543.9766"/><rect fill="#FFFFFF" height="76.7969" style="stroke:#181818;stroke-width:1.0;" width="10" x="1062.5" y="192.0156"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1376.5" y="299.1641"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1376.5" y="634.6797"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1549.5" y="385.2188"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1549.5" y="574.3281"/><polygon fill="#181818" points="632.5,127.3125,642.5,131.3125,632.5,135.3125,636.5,131.3125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="82.5" x2="638.5" y1="131.3125" y2="131.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="89.5" y="118.2803">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="524" x="100.5" y="110.1045">I want to see the list of orders that have already been prepared by the AGVs and be able to</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="438" x="104.5" y="126.4561">update any of those orders as having been dispatched for customer delivery.</text><polygon fill="#181818" points="884.5,157.6641,894.5,161.6641,884.5,165.6641,888.5,161.6641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="654.5" x2="890.5" y1="161.6641" y2="161.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="661.5" y="156.8076">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="212" x="672.5" y="156.8076">getOrdersToBeReadyForPackaging()</text><polygon fill="#181818" points="1050.5,188.0156,1060.5,192.0156,1050.5,196.0156,1054.5,192.0156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="906.5" x2="1056.5" y1="192.0156" y2="192.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="913.5" y="187.1592">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="924.5" y="187.1592">repositories()</text><rect height="41.4453" style="stroke:#000000;stroke-width:1.5;fill:none;" width="146" x="994.5" y="200.0156"/><path d="M994.5,200.0156 L1056.5,200.0156 L1056.5,208.0156 L1046.5,218.0156 L994.5,218.0156 L994.5,200.0156 " fill="#EEEEEE" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="1007.5" y="215.5107">ref</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="114" x="1010.5" y="234.4727">OrderRepository_SD</text><polygon fill="#181818" points="917.5,264.8125,907.5,268.8125,917.5,272.8125,913.5,268.8125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="911.5" x2="1066.5" y1="268.8125" y2="268.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="923.5" y="263.9561">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="934.5" y="263.9561"> </text><polygon fill="#181818" points="1364.5,295.1641,1374.5,299.1641,1364.5,303.1641,1368.5,299.1641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="906.5" x2="1370.5" y1="299.1641" y2="299.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="913.5" y="294.3076">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192" x="924.5" y="294.3076">findAllOrderReadyForPackaging()</text><polygon fill="#181818" points="917.5,325.5156,907.5,329.5156,917.5,333.5156,913.5,329.5156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="911.5" x2="1380.5" y1="329.5156" y2="329.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="923.5" y="324.6592">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="934.5" y="324.6592">orderslist</text><path d="M805.5,344.5156 L878.5,344.5156 L878.5,352.8672 L868.5,362.8672 L805.5,362.8672 L805.5,344.5156 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="79.0547" style="stroke:#000000;stroke-width:1.5;" width="832" x="805.5" y="344.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="820.5" y="359.0107">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="162" x="893.5" y="357.9346">[for each order on orderslist]</text><polygon fill="#181818" points="1537.5,381.2188,1547.5,385.2188,1537.5,389.2188,1541.5,385.2188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="906.5" x2="1543.5" y1="385.2188" y2="385.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="913.5" y="380.3623">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="924.5" y="380.3623">toOrderDTO(order)</text><polygon fill="#181818" points="917.5,411.5703,907.5,415.5703,917.5,419.5703,913.5,415.5703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="911.5" x2="1553.5" y1="415.5703" y2="415.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="923.5" y="410.7139">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55" x="934.5" y="410.7139">orderDTO</text><polygon fill="#181818" points="665.5,448.9219,655.5,452.9219,665.5,456.9219,661.5,452.9219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="659.5" x2="900.5" y1="452.9219" y2="452.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="671.5" y="448.0654">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="682.5" y="448.0654">orderslistDTO</text><polygon fill="#181818" points="93.5,479.2734,83.5,483.2734,93.5,487.2734,89.5,483.2734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="87.5" x2="648.5" y1="483.2734" y2="483.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="99.5" y="478.417">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="255" x="117.5" y="478.417">asks to select the desired order from the list</text><polygon fill="#181818" points="632.5,509.625,642.5,513.625,632.5,517.625,636.5,513.625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="82.5" x2="638.5" y1="513.625" y2="513.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="89.5" y="508.7686">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="107.5" y="508.7686">selects the requested data</text><polygon fill="#181818" points="884.5,539.9766,894.5,543.9766,884.5,547.9766,888.5,543.9766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="654.5" x2="890.5" y1="543.9766" y2="543.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="661.5" y="539.1201">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="679.5" y="539.1201">changeState(orderdto)</text><polygon fill="#181818" points="1537.5,570.3281,1547.5,574.3281,1537.5,578.3281,1541.5,574.3281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="906.5" x2="1543.5" y1="574.3281" y2="574.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="913.5" y="569.4717">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="931.5" y="569.4717">changeState(orderid)</text><polygon fill="#181818" points="1364.5,630.6797,1374.5,634.6797,1364.5,638.6797,1368.5,634.6797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="906.5" x2="1370.5" y1="634.6797" y2="634.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="913.5" y="629.8232">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63" x="931.5" y="629.8232">save(order)</text><polygon fill="#181818" points="88.5,691.0313,78.5,695.0313,88.5,699.0313,84.5,695.0313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="82.5" x2="643.5" y1="695.0313" y2="695.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="94.5" y="690.1748">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="112.5" y="690.1748">informs operation success</text><!--MD5=[5893518437fa3b403ba71004f73456e0]
@startuml
autonumber
'hide footbox
actor "Warehouse Employee" as WE

participant ":DispatchOrderUI" as UI
participant ":DispatchOrderController" as CTRL
participant ":PersistenceContext" as PC
participant ":RepositoryFactory" as RF
participant ":Product_OrderRepository" as OR
participant "order:Product_Order" as O
participant "orderdto:Product_OrderDtoComplete" as ODC
participant "orderslist:List<Product_Order>" as OL


activate WE
WE -> UI: I want to see the list of orders that have already been prepared by the AGVs and be able to  \n update any of those orders as having been dispatched for customer delivery.
activate UI
UI -> CTRL : getOrdersToBeReadyForPackaging()
activate CTRL
CTRL -> PC : repositories()

activate PC
ref over PC
OrderRepository_SD
end ref
PC - -> CTRL
deactivate PC

CTRL -> OR : findAllOrderReadyForPackaging()
activate OR
OR - -> CTRL : orderslist
deactivate OR
loop for each order on orderslist
CTRL -> O : toOrderDTO(order)
activate O
O - -> CTRL :orderDTO
deactivate O
end
CTRL - -> UI :orderslistDTO

deactivate CTRL

UI - -> WE: asks to select the desired order from the list
deactivate UI
WE -> UI: selects the requested data
activate UI
UI -> CTRL : changeState(orderdto)
activate CTRL
CTRL -> O  : changeState(orderid)
activate O
deactivate O
CTRL -> OR : save(order)
activate OR
deactivate OR
deactivate CTRL
deactivate CTRL
UI - -> WE: informs operation success






deactivate WE
@enduml

@startuml
autonumber
actor "Warehouse Employee" as WE

participant ":DispatchOrderUI" as UI
participant ":DispatchOrderController" as CTRL
participant ":PersistenceContext" as PC
participant ":RepositoryFactory" as RF
participant ":Product_OrderRepository" as OR
participant "order:Product_Order" as O
participant "orderdto:Product_OrderDtoComplete" as ODC
participant "orderslist:List<Product_Order>" as OL


activate WE
WE -> UI: I want to see the list of orders that have already been prepared by the AGVs and be able to  \n update any of those orders as having been dispatched for customer delivery.
activate UI
UI -> CTRL : getOrdersToBeReadyForPackaging()
activate CTRL
CTRL -> PC : repositories()

activate PC
ref over PC
OrderRepository_SD
end ref
PC - -> CTRL
deactivate PC

CTRL -> OR : findAllOrderReadyForPackaging()
activate OR
OR - -> CTRL : orderslist
deactivate OR
loop for each order on orderslist
CTRL -> O : toOrderDTO(order)
activate O
O - -> CTRL :orderDTO
deactivate O
end
CTRL - -> UI :orderslistDTO

deactivate CTRL

UI - -> WE: asks to select the desired order from the list
deactivate UI
WE -> UI: selects the requested data
activate UI
UI -> CTRL : changeState(orderdto)
activate CTRL
CTRL -> O  : changeState(orderid)
activate O
deactivate O
CTRL -> OR : save(order)
activate OR
deactivate OR
deactivate CTRL
deactivate CTRL
UI - -> WE: informs operation success






deactivate WE
@enduml

PlantUML version 1.2022.4(Sat Apr 09 14:29:17 BST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>